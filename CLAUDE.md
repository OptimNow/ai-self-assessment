# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**AI Cost Readiness Assessment** by OptimNow - An interactive self-assessment tool that evaluates organizations' maturity in managing AI and cloud computing costs across 10 critical dimensions. The tool provides AI-powered analysis via OpenAI GPT-4o-mini to generate personalized readiness reports.

**Tech Stack**: React 19.2.1 + Vite 6.2.0 + TypeScript 5.8 + Vercel (serverless deployment)

**Target Audience**: CTOs, VP Engineering, Cloud Architects, FinOps Teams

## Development Commands

```bash
# Install dependencies
npm install

# Run development server (localhost:3000)
npm run dev

# Build for production
npm run build

# Preview production build
npm run preview
```

## Environment Variables

Create a `.env.local` file (not tracked in git):

```
OPENAI_API_KEY=sk-...  # Required for AI report generation
```

The OpenAI API key is used by the Vercel serverless function at `/api/generate-report.ts`.

## Application Architecture

### State Machine Pattern

The app uses a state machine with 4 primary states defined in `types.ts`:

```typescript
enum AppState {
  LANDING,     // Hero page with assessment intro
  ASSESSMENT,  // 10-question interactive flow
  ANALYZING,   // Loading state with spinner
  RESULTS      // AI-generated report display
}
```

All state transitions are managed in `App.tsx`. Navigation between states is explicit and unidirectional during the assessment flow.

### Assessment Framework

**10 Dimensions across 3 Categories** (defined in `constants.ts`):

1. **Visibility** (3 dimensions): Real-time visibility, allocation capability, continuous monitoring
2. **Control** (3 dimensions): Proxy infrastructure, alert configuration, optimization speed
3. **Business Value** (4 dimensions): Business context, unit economics, forecast capability, ROI measurement

**Scoring System**: 3-point scale per dimension
- 0 points: Not Implemented
- 5 points: Partially Implemented
- 10 points: Fully Optimized
- Maximum total: 100 points

### Data Flow

1. **User Input**: User answers 10 questions in `Assessment.tsx`, selecting one of three options per dimension
2. **API Call**: `App.tsx` calls `generateReadinessReport()` from `services/geminiService.ts`
3. **Serverless Function**: Request hits `/api/generate-report.ts` (Vercel serverless function)
4. **AI Analysis**: OpenAI GPT-4o-mini analyzes scores with temperature 0.2, enforced JSON response format
5. **Report Display**: `Results.tsx` renders the structured AI response with radar chart visualization

### API Contract

**Request** to `/api/generate-report`:
```typescript
{
  responses: Array<{
    dimensionId: string,  // e.g., "real_time_visibility"
    score: number         // 0, 5, or 10
  }>
}
```

**Response** (generated by OpenAI):
```typescript
{
  overallReadiness: string,
  executiveSummary: string,
  keyStrengths: string[],
  criticalGaps: string[],
  roadmap: Array<{
    phase: string,
    action: string,
    impact: string
  }>
}
```

### Component Structure

```
App.tsx                  # Root component, state orchestrator
├── components/
│   ├── Assessment.tsx   # Multi-step questionnaire with progress tracking
│   ├── Results.tsx      # Report display with radar chart
│   └── RadialChart.tsx  # Recharts-based visualization
├── services/
│   └── geminiService.ts # Frontend API client (fetch wrapper)
└── api/
    └── generate-report.ts # Vercel serverless function (OpenAI integration)
```

## SEO Optimization

This codebase is **heavily optimized for LLM searchability**:

- **index.html**: Comprehensive meta tags (Open Graph, Twitter Cards), JSON-LD structured data, robots meta tags
- **constants.ts**: JSDoc documentation with keyword annotations for each dimension
- **App.tsx**: Semantic HTML5 (article, section, header), ARIA labels, microdata with itemProp
- **public/robots.txt**: Specific rules for AI/LLM crawlers (GPTBot, ChatGPT-User, Google-Extended, CCBot, anthropic-ai, Claude-Web, PerplexityBot)

When modifying content, maintain semantic HTML and structured data to preserve SEO benefits.

## Key Files & Their Purpose

| File | Purpose |
|------|---------|
| `constants.ts` | Assessment dimensions, questions, and scoring options. Heavily documented for SEO. |
| `types.ts` | TypeScript interfaces and AppState enum. Source of truth for data contracts. |
| `App.tsx` | Main orchestrator. Manages AppState transitions, error handling, and data flow. |
| `api/generate-report.ts` | Vercel serverless function. OpenAI integration for AI report generation. |
| `services/geminiService.ts` | Frontend API client. Thin wrapper around fetch for type safety. |
| `index.html` | Entry point with extensive SEO meta tags and JSON-LD structured data. |

## Styling & Design System

Uses **Tailwind CSS** (CDN-based) with custom brand colors defined in `index.html`:

```javascript
colors: {
  brand: {
    chartreuse: '#ACE849',  // Primary accent
    charcoal: '#2C2C2C',    // Main background
    darkGrey: '#C1C1C1',    // Secondary text
    lightGrey: '#F4F4F4',   // Primary text
    white: '#FFFFFF'
  }
}
```

Font families:
- Sans: Almarai (body text)
- Headline: Manrope (headings)
- Mono: Space Mono (code, labels)

## Deployment

Deployed on **Vercel** with:
- Automatic deployments from git pushes
- Serverless function for `/api/generate-report`
- Vercel Analytics enabled via `@vercel/analytics/react`
- Environment variable `OPENAI_API_KEY` configured in Vercel dashboard

## Important Patterns

1. **No Direct DOM Manipulation**: All UI updates via React state changes
2. **Type Safety**: Full TypeScript coverage, no `any` types except error handling
3. **Serverless Architecture**: API routes are Vercel functions, not Express/Next.js API routes
4. **Semantic HTML**: Prefer `<article>`, `<section>`, `<header>` over `<div>` for SEO
5. **ARIA Labels**: Maintain accessibility attributes on interactive elements
6. **Error Boundaries**: API failures gracefully handled, user returned to LANDING state with error message

## Modifying Assessment Dimensions

To add/modify assessment dimensions:

1. Update `constants.ts` → `DIMENSIONS` array
2. Maintain JSDoc comments and keyword annotations for SEO
3. Ensure `category` is one of: "Visibility", "Control", or "Business Value"
4. Update `types.ts` if adding new categories
5. Scoring options remain fixed at 0/5/10 (do not change without updating API contract)

## Analytics

**Vercel Analytics** is integrated via `<Analytics />` component in `App.tsx`. Page views and interactions are automatically tracked. View metrics in Vercel dashboard.

## AI Model Configuration

The OpenAI integration uses:
- **Model**: `gpt-4o-mini` (defined in `api/generate-report.ts`)
- **Temperature**: 0.2 (low for deterministic responses)
- **Response Format**: `{ type: "json_object" }` (enforced JSON structure)
- **System Prompt**: Positioned as "Cloud FinOps expert" targeting CTOs/VPs

To modify AI behavior, edit the prompt in `api/generate-report.ts` lines 34-55.
